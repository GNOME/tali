############################################################################
# Setup paths & install options
############################################################################
srcdir = @srcdir@
VPATH = @srcdir@
prefix=@prefix@
BINDIR=$(prefix)/bin
INSTALL = @INSTALL@
INSTALL_PROGRAM = $(INSTALL) -o root -g games -m @install_setgid@

############################################################################
# Setup compiler and flags
############################################################################
CC=@CC@
CFLAGS=@CFLAGS@ @DEFS@
CPPFLAGS=@CPPFLAGS@ -I./ @CURSES_INCLUDEDIR@
LDFLAGS=@LDFLAGS@ 
LIBS=@LIBS@ @CURSES_LIBS@

############################################################################
OBJ = ../computer.o ../cyahtzee.o ../scores.o ../yahtzee.o

yahtzee: $(OBJ)
	$(CC) $(CFLAGS) -o $@ $(OBJ) $(LIBS)

install:
	echo "Installing yahtzee binary in $(BINDIR)..."
	$(INSTALL_PROGRAM) yahtzee $(BINDIR)

clean:	
	@RM@ -rf ../*.o yahtzee core

# Razzafrazzin SunOS compiles ../*.c into ./*.o 
.c.o:	../yahtzee.h ../scores.h ../cyahtzee.h
	$(CC) -c $(CFLAGS) $(CPPFLAGS) -o $@ $<

############################################################################
# Use these at your own risk.
############################################################################
clear:	clean
	@RM@ -rf ../Makefile ../Makefile.in \
	   `find . -name config.\* -not -name config.h.in -not -name config.status -print`

configure:  configure.in acconfig.h curses.m4
	cd . && autoheader
	cd . && autoconf

Makefile: configure Makefile.in
	cd . && sh ./config.status --recheck
	cd . && sh ./config.status

tar:	clear
	cd ../../ && tar -cvz --exclude CVS \
	   --exclude Makefile \
	   --exclude config.status \
	   --exclude .cvsignore  \
	   --exclude .directory  \
	   --exclude .  \
	   --exclude .deps -f /tmp/gyahtzee.tgz \
	    gyahtzee

